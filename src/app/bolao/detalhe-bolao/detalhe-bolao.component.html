<section class="content conteudo2">
    <div class="container-fluid">
        <div class="block-header">
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <ul class="breadcrumb breadcrumb-style ">
                        <li class="breadcrumb-item">
                            <h4 class="page-title">Jogo</h4>
                        </li>
                        <li class="breadcrumb-item bcrumb-1">
                            <a routerLink="/admin/dashboard/main">
                                <i class="fas fa-home"></i> Home</a>
                        </li>
                        <li class="breadcrumb-item bcrumb-2">
                            <a href="#" onClick="return false;">Jogo</a>
                        </li>
                        <li class="breadcrumb-item active">Home Jogos</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row clearfix" style="margin-top: 140px;">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">
                  <div class="header">
                    <h2>{{bolao?.nome}}</h2>
                  </div>
                  <div class="body">
                    <mat-tab-group>
                      <mat-tab label="Palpites">
                        <div class="row clearfix overflow-hidden mt-2" >
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 ">
                            <div class="card">                              
                
                                <div class="body">
                                    <div class="d-inline-flex flex-column  align-form mb-3">
            
                                        <div class="mb-4 fill-sm">                                            
                                            <mat-radio-group [(ngModel)]="filterRadio" [formControl]="filtro" aria-label="Selecione um filtro">
                                                <mat-radio-button value="1" [checked] = 'true'>Rodada</mat-radio-button>
                                                <mat-radio-button value="2">Data do Jogo</mat-radio-button>
            
                                            </mat-radio-group>
                                        </div>
                                        <div class="fill-sm" *ngIf="filterRadio == 1" style="font-size: 12px">
                                            <mat-form-field  [style.width.%]="100" appearance="outline">
                                                <mat-label>rodada</mat-label>
                                                <mat-select [formControl]="filtroRodada" [(ngModel)]="rodadaAtual">
                                                    <mat-option *ngFor="let rodada of rodadas" value="{{rodada}}">{{rodada}}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                        <div class="fill-sm" *ngIf="filterRadio == 2" style="font-size: 12px">
                                            <mat-form-field [style.width.%]="100" appearance="outline">
                                                <mat-label>Data do jogo</mat-label>
                                                <input matInput [dropSpecialCharacters]="false" mask="00-00-0000" placeholder="Ex: 01-01-2021" [formControl]="filtroData"/>
                                            </mat-form-field>
                                        </div>
                                        </div>
                                        
            
                                    <div class="m4-4" *ngIf="loadingJogos" [formGroup]="form" (ngSubmit)="cadastrar()">
                                        <ng-container formArrayName="jogosF">
                                            <ng-container *ngFor="let jogosForm of jogosF.controls; index as i">
                                                <form [formGroup] = "jogosForm" (ngSubmit)="atualizarPalpite(i)" class="mb-3">
                                                    <mat-card class="">
                                                        <div class="d-flex flex-row fill-sm justify-content-center align-content-center align-items-center mb-3 p-2">                                             
                                                           
                                                            <div class="flex-grow-1">
                                                                <div class="d-flex flex-row fill-sm justify-content-center align-content-center align-items-center mb-2">
                                                                    <input class="ml-4" style="text-align: center !important; border-style: none !important;" formControlName="dtJogo" readonly />
                                                                    
                                                                </div>                                                                                                                                           
                                                                <div class="d-flex flex-row fill-sm justify-content-center align-content-center align-items-center ml-4">
                                                                    Rodada: {{rodadaAtual}}

                                                                </div>                                                                                                                                           
                                                                <div class="d-flex flex-row fill-sm justify-content-center align-content-center align-items-center ml-4">
                                                                    <span *ngIf="horaInvalida && indexInvalido == i" style="color: red;">Palpite não computado! Horário excedido!</span>

                                                                </div>                                                                                                                                           
                                                            </div>                                                                                                            
                                                            
                                                            <div class="font-icon">
                                                                <div class="icon-preview animate__animated animate__bounce" style="color: green;" *ngIf="jogosForm.valid"><i class="fas fa-check-circle"></i></div>
                                                                <div class="icon-preview animate__animated animate__bounce" style="color: red;" *ngIf="!jogosForm.valid"><i class="fas fa-check-circle"></i></div>
                                                            </div>
                                                            
                                                        </div>
                                                        <div class="d-flex flex-row justify-content-center  mb-4">
                                                            <div class="mr-4 fill-sm">
                                                                <div class="d-flex justify-content-center">
                                                                    <img src="assets/images/times/{{jogos[i].urlTime1}}" class="size-img-time task-user-img">
                                                                </div>
                        
                                                                <div>
                                                                    <small class="d-flex justify-content-center">{{jogos[i].nomeTime1}}</small>
                                                                </div>
                                                            </div>
                                                            <div class="mr-2 fill-sm" style="font-size: 10px;">
                                                                <mat-form-field class="" style="width: 40px; height: 25px;" appearance="outline">
                                                                    <input style="text-align: center !important" formControlName="placarTime1" matInput (blur)="atualizarPalpite(i)" />
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="mr-2 mt-3 fill-sm"> VS </div>
                        
                                                            <div class="mr-4 fill-sm" style="font-size: 10px">
                                                                <mat-form-field class="example-full-width" style="width: 40px; height: 25px;" appearance="outline">
                                                                    <input style="text-align: center !important" formControlName="placarTime2" matInput (blur)="atualizarPalpite(i)"/>
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="fill-sm">
                                                                <div class="d-flex justify-content-center">
                                                                    <img src="assets/images/times/{{jogos[i].urlTime2}}" class="size-img-time task-user-img">
                                                                </div>
                        
                                                                <div>
                                                                    <small class="d-flex justify-content-center">{{jogos[i].nomeTime2}}</small>
                                                                </div>
                                                            </div>                                                            
                        
                                                        </div>
                                                        <div class="d-flex flex-row fill-sm justify-content-center align-content-center align-items-center mb-2">
                                                            <small style="color: #999;">{{jogos[i].local}}</small>
                                                        </div>
                                                        <div class="d-flex flex-row fill-sm justify-content-center align-content-center align-items-center mb-2">
                                                            <span *ngIf="jogos[i].placarTime1 != null">Resultado: {{jogos[i].placarTime1}} X {{jogos[i].placarTime2}} - {{jogos[i].status | lowercase}}</span>
                                                            <span *ngIf="jogos[i].placarTime1 == null">Resultado: Aguardando início da partida.</span>
                                                        </div>
                                                        <div class="d-flex flex-row fill-sm justify-content-center align-content-center align-items-center mb-2">
                                                            <span class="font-weight-bold">Pontos Ganhos: {{getPontosGanho(jogos[i].id)}} </span>
                                                        </div>
                                                        
                                               
                                                    </mat-card>
                                                </form>                                               
                                            </ng-container>                        
                                        </ng-container>            
                                    </div>            
                                </div>
                            </div>
                        </div>
                        </div>
                      </mat-tab>
                      <mat-tab label="Ranking" >
                        <br>
                        <div class="body table-responsive table-sm" >
                            <table class="table">
                              <thead>
                                <tr>         
                                  <th>Rank</th>
                                  <th>Nome</th>
                                  <th>Pontos</th>
                                  <th>PE</th>
                                  <th>RCG</th>
                                  <th>RC</th>
                                  <th>GE</th>                                                                           
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let rank of ranking" [ngClass]="{'table-secondary': rank.nome == nomeUsuario}">                                          
                                  <td>{{rank.posicao}}</td>
                                  <td>{{rank.nome}}</td>   
                                  <td>{{rank.totalpontosganho}}</td>                                       
                                  <td>{{rank.pe}}</td>                                       
                                  <td>{{rank.rcg}}</td>                                       
                                  <td>{{rank.rc}}</td>                                       
                                  <td>{{rank.pe}}</td>                                       
                                </tr>                                      
                              </tbody>
                            </table>
                          </div>                               
                      </mat-tab>
                      <mat-tab label="Critérios de Pontuação">
                        <br>
                        <div *ngFor="let bc of criteriosBolao" >
                            <mat-card class="shadow mt-3" *ngIf="bc.idCriterio == 1">
                                <div class="d-flex flex-direction-sm-collum fill-sm align-items-center justify-content-center">
                                    <div class="mr-3 mb-2 d-flex flex-column align-items-center justify-content-center">
                                       <span> PE - {{bc.pontuacao}} Pts  </span>                                       
                                       <span> Placar Exato </span>                                        
                                                                                  
                                    </div>
                                   
                                    <div class="ml-sm-5 d-flex flex-column align-items-center justify-content-center">
                                        <div class="">
                                            <span class="exemplo-title" style="text-align: center !important;"> Exemplo </span> 
                                        </div>
                                        <div>
                                            <span style="font-size:12px">
                                                Jogo<b>: </b> <span class="exemplo-jogo">2</span> x <span class="exemplo-jogo">1</span> »  Palpite<b>: </b> <span class="exemplo-jogo">2</span> x <span class="exemplo-jogo">1</span> =  <span class="exemplo-title"> Pontua</span><br>
                                                Jogo<b>: </b> <span class="exemplo-jogo">1</span> x <span class="exemplo-jogo">1</span> »  Palpite<b>: </b> <span class="exemplo-jogo">1</span> x <span class="exemplo-jogo">1</span> = <span class="exemplo-title"> Pontua </span><br>
                                                Jogo<b>: </b>3 x 0 »  Palpite<b>: </b>2 x 0 = <span style="color: red;"> Não Pontua </span>
                    
                                          </span>
                                        </div>                                            
                                    </div>      
                                </div>

                            </mat-card>
                            <mat-card class="shadow mt-3" *ngIf="bc.idCriterio == 2">
                                <div class="d-flex flex-direction-sm-collum fill-sm align-items-center justify-content-center">
                                    <div class="mr-3 mb-2 d-flex flex-column align-items-center justify-content-center">
                                       <span> RCG - {{bc.pontuacao}} Pts </span>                                      
                                       <span> Placar errado, resultado certo e acertou gol de um dos times</span>                                         
                                    </div>
                                   
                                    <div class="ml-sm-5 d-flex flex-column align-items-center justify-content-center">
                                        <div class="">
                                            <span class="exemplo-title" style="text-align: center !important;"> Exemplo </span> 
                                        </div>
                                        <div>
                                            <span style="font-size:12px">
                                                Jogo<b>: </b> <span class="">3</span> x <span class="exemplo-jogo">0</span> »  Palpite<b>: </b> <span class="">2</span> x <span class="exemplo-jogo">0</span> = <span class="exemplo-title"> Pontua </span><br>
                                                Jogo<b>: </b> <span class="">2</span> x <span class="exemplo-jogo">1</span> »  Palpite<b>: </b> <span class="">3</span> x <span class="exemplo-jogo">1</span> = <span class="exemplo-title"> Pontua </span><br>
                                                Jogo<b>: </b> <span class="">3</span> x <span class="">0</span> »  Palpite<b>: </b> <span class="">2</span> x <span class="">1</span> = <span style="color: red;"> Não Pontua </span>                                                    
                    
                                          </span>
                                        </div>                                           
                                    </div>      
                                </div>

                            </mat-card>
                            <mat-card class="shadow mt-3" *ngIf="bc.idCriterio == 3">
                                <div class="d-flex flex-direction-sm-collum fill-sm align-items-center justify-content-center">
                                    <div class="mr-3 mb-2 d-flex flex-column align-items-center justify-content-center">
                                       <span> RC - {{bc.pontuacao}} Pts </span>                                      
                                       <span> Placar errado e resultado certo</span>                                         
                                    </div>
                                   
                                    <div class="ml-sm-5 d-flex flex-column align-items-center justify-content-center">
                                        <div class="">
                                            <span class="exemplo-title" style="text-align: center !important;"> Exemplo </span> 
                                        </div>
                                        <div>
                                          <span style="font-size:12px">
                                                Jogo<b>: </b> <span class="">1</span> x <span class="">0</span> »  Palpite<b>: </b> <span class="">2</span> x <span class="">1</span> = <span class="exemplo-title"> Pontua </span><br>
                                                Jogo<b>: </b> <span class="">1</span> x <span class="">1</span> »  Palpite<b>: </b> <span class="">2</span> x <span class="">2</span> = <span class="exemplo-title"> Pontua </span><br>
                                                Jogo<b>: </b> <span class="">3</span> x <span class="">0</span> »  Palpite<b>: </b> <span class="">1</span> x <span class="">1</span> = <span style="color: red;"> Não Pontua </span>
                                                
                                          </span>
                                        </div>                                           
                                    </div>      
                                </div>

                            </mat-card>
                            <mat-card class="shadow mt-3" *ngIf="bc.idCriterio == 4">
                                <div class="d-flex flex-direction-sm-collum fill-sm align-items-center justify-content-center">
                                    <div class="mr-3 mb-2 d-flex flex-column align-items-center justify-content-center">
                                       <span> GE - {{bc.pontuacao}} Pts </span>                                      
                                       <span> Acertou gol com placar errado</span>                                         
                                    </div>
                                   
                                    <div class="ml-sm-5 d-flex flex-column align-items-center justify-content-center">
                                        <div class="">
                                            <span class="exemplo-title" style="text-align: center !important;"> Exemplo </span> 
                                        </div>
                                        <div>
                                          <span style="font-size:12px">
                                            Jogo<b>: </b> <span class="exemplo-jogo">1</span> x <span class="">0</span> »  Palpite<b>: </b> <span class="exemplo-jogo">1</span> x <span class="">2</span> = <span class="exemplo-title"> Pontua </span><br>
                                            Jogo<b>: </b> <span class="">2</span> x <span class="exemplo-jogo">2</span> »  Palpite<b>: </b> <span class="">1</span> x <span class="exemplo-jogo">2</span> = <span class="exemplo-title"> Pontua </span><br>
                                            Jogo<b>: </b> <span class="">2</span> x <span class="">1</span> »  Palpite<b>: </b> <span class="">1</span> x <span class="">0</span> = <span style="color: red;"> Não Pontua </span>                                           
                                          </span>
                                        </div>                                           
                                    </div>      
                                </div>

                            </mat-card>
                            
                          </div>                               
                      </mat-tab>
                    </mat-tab-group>
                  </div>
                </div>
              </div>
            
        </div>
    </div>
</section>